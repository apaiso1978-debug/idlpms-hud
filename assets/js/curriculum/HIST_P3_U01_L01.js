/**
 * HIST_P3_U01_L01 — ความหมายและที่มาของศักราช
 * Harvested: 2026-02-18 | Source: DLTV episode/89998
 * Grade: ป.3 | Subject: ประวัติศาสตร์ | Unit: 1 | Lesson: 1
 * Quality Score: 92/100
 */
export const HIST_P3_U01_L01 = {

    // ═══════════════════════════════════════
    // METADATA
    // ═══════════════════════════════════════
    id: 'HIST_P3_U01_L01',
    grade: 'ป.3',
    subjectId: 'HIST',
    subjectName: 'ประวัติศาสตร์',
    semester: 1,
    unitNumber: 1,
    unitName: 'ศักราชและการสืบค้นทางประวัติศาสตร์',
    lessonNumber: 1,
    lessonName: 'ความหมายและที่มาของศักราช',
    dltvUrl: 'https://dltv.ac.th/teachplan/episode/89998',
    hlsUrl: '', // TODO: extract from video player
    airDate: '2068-05-20',

    // ═══════════════════════════════════════
    // STEP 2: LINK — สาระสำคัญ + ตัวชี้วัด + KPA
    // ═══════════════════════════════════════
    pedagogicalData: {
        indicator: 'ส 4.1 ป.3/1',
        indicatorFull: 'เทียบศักราชที่สำคัญตามปฏิทินที่ใช้ในชีวิตประจำวัน',
        summary: 'พุทธศักราช หรือ พ.ศ. เป็นศักราชตามปฏิทินไทย คริสต์ศักราช หรือ ค.ศ. เป็นศักราชสากลที่ใช้กันทั่วไป และฮิจเราะห์ศักราช หรือ ฮ.ศ. เป็นปฏิทินในหลักศาสนาอิสลาม เหตุการณ์สำคัญทางศาสนามักเป็นที่มาของศักราช',
        objectives: {
            K: 'บอกความหมายและที่มาของศักราชได้ (พ.ศ. ค.ศ. ฮ.ศ.)',
            P: 'นำเสนอผลงานและการทำงานร่วมกับผู้อื่น',
            A: 'ตระหนักถึงความสำคัญของที่มาของศักราช'
        },
        evaluation: [
            'ประเมินผลการตอบคำถาม',
            'ประเมินผลการตรวจใบงาน',
            'ประเมินผลการสังเกตพฤติกรรมนักเรียนรายบุคคล'
        ]
    },

    // ═══════════════════════════════════════
    // STEP 3: DO — เนื้อหาเรียนรู้
    // ═══════════════════════════════════════
    contentSections: [
        {
            title: 'ศักราชคืออะไร',
            content: 'ศักราช (สัก-กะ-หฺราด) หมายถึง อายุเวลาซึ่งกำหนดตั้งขึ้นเป็นทางการ เริ่มแต่จุดใดจุดหนึ่ง ซึ่งถือว่าเป็นที่หมายเหตุการณ์สำคัญ เรียงลำดับกันเป็นปีๆ ไป เช่น พุทธศักราช 1, พุทธศักราช 2... ศักราชที่นักเรียนควรรู้มี 3 ศักราชหลัก ได้แก่ พุทธศักราช (พ.ศ.) คริสต์ศักราช (ค.ศ.) และฮิจเราะห์ศักราช (ฮ.ศ.) เหตุการณ์สำคัญทางศาสนามักเป็นที่มาของการกำหนดศักราชต่างๆ',
            source: 'PDF'
        },
        {
            title: 'พุทธศักราช (พ.ศ.)',
            content: 'พุทธศักราช เป็นศักราชที่พุทธศาสนิกชนกำหนดขึ้น โดยเริ่มนับจากปีที่พระพุทธเจ้าเสด็จดับขันธปรินิพพาน ประเทศไทยเริ่มนับ พ.ศ. 1 หลังจากพระพุทธเจ้าปรินิพพานไปแล้ว 1 ปี ส่วนประเทศอื่นเช่น พม่า ศรีลังกา กัมพูชา จะนับปีที่ปรินิพพานเป็น พ.ศ. 1 เลย จึงมากกว่าของไทย 1 ปี ประเทศไทยเริ่มใช้พุทธศักราชอย่างเป็นทางการในสมัยรัชกาลที่ 6 เมื่อ พ.ศ. 2455 โดยเปลี่ยนจากรัตนโกสินทร์ศก ปัจจุบันเป็นปี พ.ศ. 2568',
            source: 'WEB'
        },
        {
            title: 'คริสต์ศักราช (ค.ศ.)',
            content: 'คริสต์ศักราช เป็นศักราชสากลที่ใช้กันทั่วโลก โดยเริ่มนับปีที่พระเยซูคริสต์ประสูติเป็น ค.ศ. 1 เป็นการนับเวลาตามศาสนาคริสต์ ค.ศ. ใช้ในเอกสารราชการสากล การค้าขาย และวิทยาศาสตร์ สูตรเปลี่ยน: พ.ศ. - 543 = ค.ศ. ตัวอย่าง: พ.ศ. 2568 - 543 = ค.ศ. 2025',
            source: 'WEB'
        },
        {
            title: 'ฮิจเราะห์ศักราช (ฮ.ศ.)',
            content: 'ฮิจเราะห์ศักราช เป็นปฏิทินในหลักศาสนาอิสลาม เริ่มนับจากปีที่ท่านนบีมุฮัมมัดอพยพจากเมืองมักกะฮ์ไปเมืองมะดีนะฮ์ คำว่า "ฮิจเราะห์" แปลว่า "การอพยพ" ปฏิทินฮิจเราะห์ใช้ระบบจันทรคติ (นับตามดวงจันทร์) จึงมี 354-355 วันต่อปี สูตรเปลี่ยนโดยประมาณ: พ.ศ. - 1122 = ฮ.ศ.',
            source: 'WEB'
        },
        {
            title: 'ปฏิทินกับศักราช',
            content: 'ปฏิทินบอกข้อมูลสำคัญหลายอย่าง ได้แก่ ชื่อวัน วันที่ เดือน ปีพุทธศักราช ปีคริสต์ศักราช และวันสำคัญ ปฏิทินมีประโยชน์ในการวางแผนชีวิตประจำวัน การนัดหมาย การจดบันทึกเหตุการณ์สำคัญ และการเรียนรู้ประวัติศาสตร์ ปฏิทินมีหลายรูปแบบ เช่น ปฏิทินตั้งโต๊ะ ปฏิทินแขวน ปฏิทินติดผนัง',
            source: 'PDF'
        }
    ],

    // ═══════════════════════════════════════
    // STEP 1 & 6: KNOW / AUDIT — Quiz 5 ข้อ
    // ═══════════════════════════════════════
    quiz: [
        {
            id: 'Q1',
            question: '"ศักราช" หมายถึงอะไร',
            options: [
                'ก. ชื่อของประเทศ',
                'ข. อายุเวลาที่กำหนดขึ้นจากเหตุการณ์สำคัญ',
                'ค. ชื่อของดวงดาว',
                'ง. วันสำคัญทางศาสนา'
            ],
            answer: 1,
            kpaType: 'K'
        },
        {
            id: 'Q2',
            question: 'พุทธศักราช (พ.ศ.) เริ่มนับจากเหตุการณ์ใด',
            options: [
                'ก. พระพุทธเจ้าประสูติ',
                'ข. พระพุทธเจ้าตรัสรู้',
                'ค. พระพุทธเจ้าปรินิพพาน',
                'ง. พระพุทธเจ้าแสดงปฐมเทศนา'
            ],
            answer: 2,
            kpaType: 'K'
        },
        {
            id: 'Q3',
            question: 'คริสต์ศักราช (ค.ศ.) เริ่มนับจากเหตุการณ์ใด',
            options: [
                'ก. พระเยซูคริสต์สิ้นพระชนม์',
                'ข. พระเยซูคริสต์ประสูติ',
                'ค. พระเยซูคริสต์ฟื้นคืนพระชนม์',
                'ง. พระเยซูคริสต์รับบัพติศมา'
            ],
            answer: 1,
            kpaType: 'K'
        },
        {
            id: 'Q4',
            question: 'ถ้าปีนี้เป็น พ.ศ. 2568 จะเป็น ค.ศ. อะไร',
            options: [
                'ก. ค.ศ. 2024',
                'ข. ค.ศ. 2025',
                'ค. ค.ศ. 2026',
                'ง. ค.ศ. 3111'
            ],
            answer: 1,
            kpaType: 'P'
        },
        {
            id: 'Q5',
            question: 'ทำไมเราจึงควรเรียนรู้เรื่องศักราช',
            options: [
                'ก. เพราะจะได้คะแนนดี',
                'ข. เพราะช่วยให้เข้าใจลำดับเวลาของเหตุการณ์ทางประวัติศาสตร์',
                'ค. เพราะครูบังคับให้เรียน',
                'ง. เพราะจะได้ท่องจำตัวเลข'
            ],
            answer: 1,
            kpaType: 'A'
        }
    ],

    // ═══════════════════════════════════════
    // STEP 4: SYNC — Interactive Activities
    // ═══════════════════════════════════════
    syncActivities: [
        {
            id: 'SYNC1',
            type: 'matching',
            title: 'จับคู่ศักราชกับที่มา',
            data: {
                pairs: [
                    ['พุทธศักราช (พ.ศ.)', 'พระพุทธเจ้าปรินิพพาน'],
                    ['คริสต์ศักราช (ค.ศ.)', 'พระเยซูคริสต์ประสูติ'],
                    ['ฮิจเราะห์ศักราช (ฮ.ศ.)', 'ท่านนบีมุฮัมมัดอพยพ']
                ]
            },
            kpaType: 'K'
        },
        {
            id: 'SYNC2',
            type: 'fill_in',
            title: 'เติมสูตรเทียบศักราช',
            data: {
                questions: [
                    { sentence: 'พ.ศ. - ___ = ค.ศ.', answer: '543', hint: 'ลองหา 2568 - ค.ศ.2025' },
                    { sentence: 'พ.ศ. 2568 = ค.ศ. ___', answer: '2025', hint: 'ใช้สูตร พ.ศ. - 543' },
                    { sentence: 'ค.ศ. 2000 = พ.ศ. ___', answer: '2543', hint: 'ใช้สูตร ค.ศ. + 543' }
                ]
            },
            kpaType: 'P'
        },
        {
            id: 'SYNC3',
            type: 'multiple_choice',
            title: 'สถานการณ์จำลอง: ดูปฏิทิน',
            data: {
                scenario: 'นักเรียนเห็นในปฏิทินเขียนว่า "2025" ศักราชนี้เรียกว่าอะไร',
                options: [
                    'ก. พุทธศักราช',
                    'ข. คริสต์ศักราช',
                    'ค. ฮิจเราะห์ศักราช',
                    'ง. มหาศักราช'
                ],
                answer: 1
            },
            kpaType: 'K'
        }
    ],

    // ═══════════════════════════════════════
    // STEP 5: REFLECT — ฝึกฝน
    // ═══════════════════════════════════════
    reflectExercises: [
        {
            id: 'REF1',
            type: 'open_ended',
            question: 'ให้นักเรียนสรุปที่มาของศักราชทั้ง 3 ศักราช ได้แก่ พุทธศักราช คริสต์ศักราช และฮิจเราะห์ศักราช',
            kpaType: 'K',
            source: 'PDF',
            rubricRef: 'rubric.reflectQ1'
        },
        {
            id: 'REF2',
            type: 'fill_in',
            question: 'เติมคำให้ถูกต้อง',
            data: {
                sentences: [
                    'พุทธศักราชเริ่มนับจากเหตุการณ์พระพุทธเจ้า___', // ปรินิพพาน
                    'คริสต์ศักราชเริ่มนับจากเหตุการณ์พระเยซูคริสต์___', // ประสูติ
                    'ฮิจเราะห์ศักราชเริ่มนับจากเหตุการณ์ท่านนบีมุฮัมมัด___' // อพยพ
                ],
                answers: ['ปรินิพพาน', 'ประสูติ', 'อพยพ']
            },
            kpaType: 'K',
            source: 'AI'
        }
    ],

    // ═══════════════════════════════════════
    // STEP 7: MASTER — Mastery Challenge
    // ═══════════════════════════════════════
    masterChallenge: {
        type: 'scenario',
        title: 'สถานการณ์จำลอง: นักสืบประวัติศาสตร์',
        scenario: 'นักเรียนพบเอกสารเก่าในห้องสมุดโรงเรียน เขียนว่า "จัดงานฉลองครบรอบ 50 ปีโรงเรียน ค.ศ. 1990" นักเรียนต้องตอบคำถามต่อไปนี้:',
        questions: [
            {
                id: 'M1',
                question: 'งานฉลองนี้จัดขึ้นเมื่อ พ.ศ. อะไร',
                options: ['ก. พ.ศ. 2530', 'ข. พ.ศ. 2533', 'ค. พ.ศ. 2543', 'ง. พ.ศ. 2490'],
                answer: 1,
                kpaType: 'P'
            },
            {
                id: 'M2',
                question: 'โรงเรียนนี้ก่อตั้งเมื่อ ค.ศ. อะไร',
                options: ['ก. ค.ศ. 1930', 'ข. ค.ศ. 1940', 'ค. ค.ศ. 1950', 'ง. ค.ศ. 1960'],
                answer: 1,
                kpaType: 'P'
            },
            {
                id: 'M3',
                question: 'ถ้าปีนี้เป็น พ.ศ. 2568 โรงเรียนนี้มีอายุกี่ปีแล้ว',
                options: ['ก. 85 ปี', 'ข. 95 ปี', 'ค. 105 ปี', 'ง. 78 ปี'],
                answer: 1,
                kpaType: 'P'
            },
            {
                id: 'M4',
                question: 'เอกสารที่พบใช้ศักราชแบบไหน และทำไมจึงใช้แบบนั้น',
                type: 'open_ended',
                kpaType: 'A',
                rubricRef: 'rubric.masterQ4'
            },
            {
                id: 'M5',
                question: 'การเรียนรู้เรื่องศักราชช่วยให้เราเข้าใจประวัติศาสตร์ได้อย่างไร ยกตัวอย่าง 1 เรื่อง',
                type: 'open_ended',
                kpaType: 'A',
                rubricRef: 'rubric.masterQ5'
            }
        ]
    },

    // ═══════════════════════════════════════
    // CLIENT-SIDE AI SUPPORT
    // ═══════════════════════════════════════
    keywords: [
        'ศักราช', 'พุทธศักราช', 'พ.ศ.', 'คริสต์ศักราช', 'ค.ศ.',
        'ฮิจเราะห์ศักราช', 'ฮ.ศ.', 'ปรินิพพาน', 'ประสูติ', 'อพยพ',
        'ปฏิทิน', 'เทียบศักราช', '543'
    ],

    rubric: {
        reflectQ1: {
            description: 'สรุปที่มาของศักราช 3 ประเภท',
            requiredKeywords: ['พุทธศักราช', 'ปรินิพพาน', 'คริสต์ศักราช', 'ประสูติ', 'ฮิจเราะห์', 'อพยพ'],
            scoringPerKeyword: 15,
            minScore: 60,
            maxScore: 100
        },
        masterQ4: {
            description: 'ระบุศักราชในเอกสารและอธิบายเหตุผล',
            requiredKeywords: ['คริสต์ศักราช', 'ค.ศ.', 'สากล'],
            scoringPerKeyword: 25,
            bonusKeywords: ['ทั่วโลก', 'นานาชาติ'],
            bonusScore: 10,
            minScore: 50,
            maxScore: 100
        },
        masterQ5: {
            description: 'อธิบายประโยชน์ของศักราชต่อการเรียนประวัติศาสตร์',
            requiredKeywords: ['ลำดับ', 'เวลา', 'เหตุการณ์'],
            scoringPerKeyword: 20,
            bonusKeywords: ['เปรียบเทียบ', 'ปฏิทิน', 'บันทึก'],
            bonusScore: 10,
            minScore: 50,
            maxScore: 100
        }
    },

    aiPromptTemplates: {
        checkOpenEnded: `บทเรียน: ความหมายและที่มาของศักราช (ป.3 ประวัติศาสตร์)
ตัวชี้วัด: ส 4.1 ป.3/1 เทียบศักราชที่สำคัญตามปฏิทินที่ใช้ในชีวิตประจำวัน
จุดประสงค์: {objective}
คำถาม: {question}
คำตอบนักเรียน: {answer}
เกณฑ์: ต้องมีคำสำคัญ: {requiredKeywords}
ให้คะแนน 0-100 พร้อมอธิบายสั้นๆ ว่าเด็กเข้าใจหรือไม่`,

        giveHint: `นักเรียน ป.3 กำลังเรียนเรื่อง "ความหมายและที่มาของศักราช"
นักเรียนติดที่: {stuckPoint}
เนื้อหาที่เกี่ยวข้อง: ศักราชมี 3 แบบ: พ.ศ.(ปรินิพพาน) ค.ศ.(ประสูติ) ฮ.ศ.(อพยพ) สูตรเทียบ: พ.ศ.-543=ค.ศ.
ให้คำใบ้ 1 ประโยค ใช้ภาษาง่ายๆ เหมาะกับเด็กอายุ 8-9 ขวบ`,

        feedback: `ผลทดสอบนักเรียน ป.3 เรื่อง "ความหมายและที่มาของศักราช"
Pre-test: {preScore}% | Post-test: {postScore}%
สร้าง feedback ให้กำลังใจ 2-3 ประโยค ใช้ภาษาสุภาพ อ่อนโยน เหมาะกับเด็ก`
    },

    // ═══════════════════════════════════════
    // SOURCES & META
    // ═══════════════════════════════════════
    pdfSources: [
        { url: 'https://dltv.ac.th/utils/files/download/177233', type: 'สื่อประกอบการสอน', pages: 33, chars: 4424 },
        { url: 'https://dltv.ac.th/utils/files/download/177234', type: 'ใบงาน', pages: 1, chars: 2058 },
        { url: 'https://dltv.ac.th/utils/files/download/177235', type: 'ใบความรู้', pages: 1, chars: 1894 }
    ],
    webSources: [
        'dltv.ac.th', 'wikipedia.org', 'digitalschool.club', 'silpa-mag.com'
    ],
    harvestDate: '2026-02-18',
    qualityScore: 92,
    qualityGate: {
        contentSections: true,     // ≥3 sections ✅ (5 sections)
        contentMinWords: true,     // each ≥50 words ✅
        quizCount: true,           // exactly 5 ✅
        quizKPA: true,             // K≥2, P≥1, A≥1 ✅ (K:3, P:1, A:1)
        syncActivities: true,      // ≥2 activities ✅ (3 activities)
        keywords: true,            // ≥5 terms ✅ (13 terms)
        rubric: true,              // has criteria ✅
        objectives: true,          // K, P, A all present ✅
        indicator: true,           // not empty ✅
        summary: true              // not empty ✅
    }
};
