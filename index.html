<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>IDLPMS | Instructional OS</title>

    <!-- Tailwind CSS (via CDN for development, controlled via theme.css in prod) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Core Stylesheets -->
    <link rel="stylesheet" href="assets/css/utilities.css">
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/components.css">

    <style>
        /* Precision Overrides for Industrial HUD */
        body {
            background-color: var(--vs-bg-deep);
            color: var(--vs-text-body);
            overflow-x: hidden;
            font-family: 'Sarabun', sans-serif;
            font-weight: 300;
        }

        /* 
         * Hero HUD Grid Background 
         * Rule 2 & 6: Translucent grid overlay
         */
        .hero-grid {
            background-image:
                linear-gradient(rgba(34, 211, 238, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(34, 211, 238, 0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            background-position: center;
        }

        /* Nav Header (Rule 1: 48px Height) */
        .landing-nav {
            height: 48px;
            background-color: var(--vs-bg-panel);
            border-bottom: 1px solid var(--vs-border);
            box-shadow: 0 1px 0 var(--vs-border-highlight) inset;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            position: relative;
            z-index: 10;
        }

        /* Decorative Tactical Border lines */
        .tactical-frame {
            position: relative;
            border: 1px solid var(--vs-border);
            border-radius: var(--vs-radius);
            background: var(--vs-bg-card);
            padding: 24px;
            /* Inset groove shadow */
            box-shadow: 0 1px 0 var(--vs-border-highlight) inset;
        }

        .tactical-frame::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            width: 8px;
            height: 8px;
            border-top: 1px solid rgba(var(--vs-accent-rgb), 0.5);
            border-left: 1px solid rgba(var(--vs-accent-rgb), 0.5);
            border-top-left-radius: var(--vs-radius);
        }

        .tactical-frame::after {
            content: '';
            position: absolute;
            bottom: -1px;
            right: -1px;
            width: 8px;
            height: 8px;
            border-bottom: 1px solid rgba(var(--vs-accent-rgb), 0.5);
            border-right: 1px solid rgba(var(--vs-accent-rgb), 0.5);
            border-bottom-right-radius: var(--vs-radius);
        }

        .glitch-text {
            color: var(--vs-text-title);
            text-shadow: 0 0 10px rgba(34, 211, 238, 0.3);
        }
    </style>
</head>

<body>

    <!-- Top Navigation -->
    <nav class="landing-nav">
        <div class="flex items-center gap-2">
            <!-- E-OS Isometric Wireframe Logo -->
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round"
                stroke-linejoin="round" class="w-6 h-6 text-[var(--vs-accent)]">
                <polygon
                    points="10.70,16.75 18.50,21.25 18.50,18.25 13.30,15.25 13.30,12.25 17.20,14.50 17.20,11.50 13.30,9.25 13.30,6.25 18.50,9.25 18.50,6.25 10.70,1.75"
                    stroke-opacity="0.3" />
                <polygon
                    points="13.30,15.25 21.09,19.75 21.09,16.75 15.90,13.75 15.90,10.75 19.79,13.00 19.79,10.00 15.90,7.75 15.90,4.75 21.09,7.75 21.09,4.75 13.30,0.25" />
                <path
                    d="M 13.30,15.25 L 10.70,16.75 M 21.09,19.75 L 18.50,21.25 M 21.09,16.75 L 18.50,18.25 M 15.90,13.75 L 13.30,15.25 M 15.90,10.75 L 13.30,12.25 M 19.79,13.00 L 17.20,14.50 M 19.79,10.00 L 17.20,11.50 M 15.90,7.75 L 13.30,9.25 M 15.90,4.75 L 13.30,6.25 M 21.09,7.75 L 18.50,9.25 M 21.09,4.75 L 18.50,6.25 M 13.30,0.25 L 10.70,1.75"
                    stroke-opacity="0.5" />
            </svg>
            <span class="text-[var(--vs-text-title)] text-[13px] uppercase font-light tracking-widest pl-1">E-OS <span
                    class="text-[var(--vs-text-muted)] tracking-normal">HUD</span></span>
        </div>

        <div class="flex items-center gap-3">
            <a href="docs/NETLIFY_GUIDE.md"
                class="text-[13px] text-[var(--vs-text-muted)] hover:text-[var(--vs-text-title)] transition-colors hidden md:block">Documentation</a>

            <!-- Enter HUD Button (Neon Style Rule 6) -->
            <a href="login.html"
                class="neon-btn-accent px-4 py-1.5 flex items-center gap-1.5 rounded-[3px] text-[13px] uppercase">
                <i class="icon i-arrow-right-on-rectangle w-3 h-3 bg-current"
                    style="mask-size: 12px; -webkit-mask-size: 12px;"></i>
                Enter Access
            </a>
        </div>
    </nav>

    <!-- Dynamic OS Boot Screen -->
    <main
        class="relative hero-grid min-h-[calc(100vh-48px)] flex flex-col items-center justify-center p-6 bg-gradient-to-b from-[var(--vs-bg-deep)] to-[#151518]">

        <div class="max-w-3xl w-full flex flex-col items-center text-center z-10">
            <!-- E-OS Isometric Wireframe Logo (Large) -->
            <svg viewBox="0 0 24 24" fill="none"
                class="w-24 h-24 text-[var(--vs-accent)] mb-8 drop-shadow-[0_0_15px_rgba(34,211,238,0.3)] fade-in"
                stroke="currentColor" stroke-width="0.5" stroke-linecap="round" stroke-linejoin="round">
                <polygon
                    points="10.70,16.75 18.50,21.25 18.50,18.25 13.30,15.25 13.30,12.25 17.20,14.50 17.20,11.50 13.30,9.25 13.30,6.25 18.50,9.25 18.50,6.25 10.70,1.75"
                    stroke-opacity="0.3" />
                <polygon
                    points="13.30,15.25 21.09,19.75 21.09,16.75 15.90,13.75 15.90,10.75 19.79,13.00 19.79,10.00 15.90,7.75 15.90,4.75 21.09,7.75 21.09,4.75 13.30,0.25" />
                <path
                    d="M 13.30,15.25 L 10.70,16.75 M 21.09,19.75 L 18.50,21.25 M 21.09,16.75 L 18.50,18.25 M 15.90,13.75 L 13.30,15.25 M 15.90,10.75 L 13.30,12.25 M 19.79,13.00 L 17.20,14.50 M 19.79,10.00 L 17.20,11.50 M 15.90,7.75 L 13.30,9.25 M 15.90,4.75 L 13.30,6.25 M 21.09,7.75 L 18.50,9.25 M 21.09,4.75 L 18.50,6.25 M 13.30,0.25 L 10.70,1.75"
                    stroke-opacity="0.5" />
            </svg>

            <h1 class="text-3xl md:text-5xl text-[var(--vs-text-title)] font-light tracking-widest uppercase mb-2 glitch-text fade-in"
                style="animation-delay: 0.1s;">
                E-OS <span class="text-[var(--vs-text-muted)] opacity-50">v2.0</span>
            </h1>
            <p class="text-[13px] text-[var(--vs-text-muted)] tracking-widest uppercase mb-12 fade-in"
                style="animation-delay: 0.2s;">
                Education Operating System &bull; Core Engine Ready
            </p>

            <!-- Dynamic Telemetry HUD -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 w-full mb-12 fade-in" style="animation-delay: 0.3s;">
                <div class="tactical-frame p-4 text-center">
                    <div class="text-[10px] text-[var(--vs-text-muted)] uppercase tracking-wider mb-2">Storage
                        Allocation</div>
                    <div id="telemetry-storage" class="text-xl text-[var(--vs-accent)] font-mono">0.00 KB</div>
                </div>
                <div class="tactical-frame p-4 text-center">
                    <div class="text-[10px] text-[var(--vs-text-muted)] uppercase tracking-wider mb-2">Persona Matrix
                    </div>
                    <div id="telemetry-users" class="text-xl text-[var(--vs-success)] font-mono">0 Loaded</div>
                </div>
                <div class="tactical-frame p-4 text-center">
                    <div class="text-[10px] text-[var(--vs-text-muted)] uppercase tracking-wider mb-2">Sync Engine</div>
                    <div id="telemetry-sync" class="text-xl text-[var(--sj-sci)] font-mono">Offline</div>
                </div>
                <div class="tactical-frame p-4 text-center">
                    <div class="text-[10px] text-[var(--vs-text-muted)] uppercase tracking-wider mb-2">System Status
                    </div>
                    <div class="text-[13px] text-[var(--vs-warning)] uppercase mt-1 animate-pulse">Awaiting Login</div>
                </div>
            </div>

            <a href="login.html"
                class="neon-btn-accent px-10 py-3 flex items-center gap-2 rounded-[3px] text-[13px] uppercase tracking-wider fade-in"
                style="animation-delay: 0.4s;">
                <i class="icon i-finger-print w-4 h-4 bg-current"></i>
                Initialize Access Sequence
            </a>
        </div>
    </main>

    <!-- Dynamic Telemetry Script -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            try {
                // 1. Calculate LocalStorage Size
                let totalBytes = 0;
                let userCount = 0;

                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    const item = localStorage.getItem(key);
                    totalBytes += item.length * 2; // UTF-16 approximation
                }

                const kb = (totalBytes / 1024).toFixed(2);
                document.getElementById('telemetry-storage').textContent = `${kb} KB`;

                // 2. Count Loaded Persons from dynamic_data if exists
                const dbDump = localStorage.getItem('idlpms_database') || localStorage.getItem('idlpms_dynamic_data');
                if (dbDump) {
                    const db = JSON.parse(dbDump);
                    if (db.persons) {
                        userCount = Object.keys(db.persons).length;
                    } else if (db.users) {
                        userCount = Object.keys(db.users).length;
                    }
                }
                document.getElementById('telemetry-users').textContent = `${userCount} Entities`;

                // 3. Fake Sync Status Ping
                setTimeout(() => {
                    const syncEl = document.getElementById('telemetry-sync');
                    if (navigator.onLine) {
                        syncEl.textContent = 'Standby';
                        syncEl.className = 'text-xl text-[var(--vs-success)] font-mono';
                    }
                }, 1000);

            } catch (e) {
                console.warn('Telemetry computation failed (expected if empty)', e);
            }
        });
    </script>

    <!-- Footer Area (Rule 1: Minimal) -->
    <footer
        class="h-[48px] bg-[var(--vs-bg-deep)] border-t border-[var(--vs-border)] flex items-center justify-center px-6 groove-top">
        <div class="text-[13px] text-[var(--vs-text-muted)] opacity-60 flex items-center gap-3">
            <span>&copy; 2026 E-OS Developer Team</span>
            <span class="w-[1px] h-[12px] bg-[var(--vs-border)]"></span>
            <span class="text-[var(--vs-accent)]">Zero-Mismatch Policy</span>
        </div>
    </footer>

    <!-- Simple fade-in animation -->
    <style>
        .fade-in {
            opacity: 0;
            transform: translateY(10px);
            animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</body>

</html>